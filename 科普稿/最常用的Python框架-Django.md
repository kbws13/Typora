# 最常用的Python框架--Django

Django是一个开放源代码的Web应用框架，由Python写成。采用了MTV(model–template–views)的软件设计模式，即模型（Model），视图（View）和模板（Template）。它最初是被开发来用于管理劳伦斯出版集团旗下的一些以新闻内容为主的网站的，即是CMS（内容管理系统）软件。其主要目标是简化数据库驱动的网站的开发。Django注重组件的重用性和“可插拔性”，敏捷开发和DRY法则（Don't Repeat Yourself）。在Django中普遍使用的语言是Python，甚至包括配置文件和数据模型。

## 框架介绍

使用 Django，只要很少的代码，Python 的程序开发人员可以方便、快捷地创建高品质、易维护、数据库驱动的应用程序。另外，在Django框架中，还包含许多功能强大的第三方插件，使得Django具有较强的可扩展性。由于Django在近年来的迅速发展，应用越来越广泛，被著名IT开发杂志SD Times评选为2013 SD Times 100，位列“API、库和框架”分类第6位，被认为是该领域的佼佼者。Django 框架的核心组件有：

1. 用于创建模型的对象关系映射；
2. 为最终用户设计较好的管理界面；
3. URL 设计；
4. 设计者友好的模板语言；
5. 缓存系统。

## MTV设计模式

Django其实是一个MTV 的设计模式。MTV是Model、Template、View三个单词的简写，分别代表模型、模版、视图。但是在Django中，控制器接受用户输入的部分由框架自行处理，所以 Django 里更关注的是模型（Model）、模板(Template)和视图（Views），称为 MTV模式。它们各自的职责如下：

| 层次                        | 职责                                                         |
| --------------------------- | ------------------------------------------------------------ |
| 模型（Model），即数据存取层 | 处理与数据相关的所有事务： 如何存取、如何验证有效性、包含哪些行为以及数据之间的关系等。 |
| 模板(Template)，即表现层    | 处理与表现相关的决定： 如何在页面或其他类型文档中进行显示。  |
| 视图（View），即业务逻辑层  | 存取模型及调取恰当模板的相关逻辑。模型与模板的桥梁。         |

可以看出Django 视图不处理用户输入，而仅仅决定要展现哪些数据给用户，而Django模板仅仅决定如何展现Django视图指定的数据。或者说,Django将MVC中的视图进一步分解为Django视图和Django模板两个部分，分别决定 “展现哪些数据” 和 “如何展现”，使得Django的模板可以根据需要随时替换

框架把控制层给封装了，控制层负责与数据库的交互，无非增删改查操作。在写程序的时候，只要调用相应的方法就行了，仅需写很少的调用代码，大大提高了工作效率。

## 工作流程

1.用manage .py runserver 启动Django服务器时就载入了在同一目录下的settings .py。该文件包含了项目中的配置信息，如URLConf等，其中最重要的配置就是ROOT_URLCONF，它告诉Django哪个Python模块应该用作本站的URLConf，默认的是urls .py

2.当访问url的时候，Django会根据ROOT_URLCONF的设置来装载URLConf。

3.然后按顺序逐个匹配URLConf里的URLpatterns。如果找到则会调用相关联的视图函数，并把HttpRequest对象作为第一个参数(通常是request)

4.最后该view函数负责返回一个HttpResponse对象。

![image-20220930171611389](%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84Python%E6%A1%86%E6%9E%B6-Django.assets/image-20220930171611389.png)

## 优缺点

### 优点

- 功能完善、要素齐全：自带大量常用工具和框架（比如分页，权限管理), 适合快速开发企业级网站。
- 完善的文档：经过十多年的发展和完善，Django有广泛的实践案例和完善的在线文档。开发者遇到问题时可以搜索在线文档寻求解决方案。
- 强大的数据库访问组件：Django的Model层自带数据库ORM组件，使得开发者无须学习SQL语言即可对数据库进行操作。
- Django先进的App设计理念: App是可插拔的，是不可多得的思想。不需要了，可以直接删除，对系统整体影响不大。
- 自带台管理系统admin：只需要通过简单的几行配置和代码就可以实现一个完整的后台数据管理控制平台。
- Django debug信息详尽: 很容易找出代码错误所在。

### 缺点

- 大包大揽: 对于一些轻量级应用不需要的功能模块Django也包括了，不如Flask轻便。
- 过度封装: 很多类和方法都封装了，直接使用比较简单，但改动起来就比较困难。
- 性能劣势: 与C, C++性能上相比，Django性能偏低
- 模板问题: django的模板实现了代码和样式完全分离，不允许模板里出现python代码，灵活度对某些程序员来说可能不够。